<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>主页</title>
</head>
<body>
    <div>
        <label>当前登录用户：</label>
        <span id="loginUser"></span><br/>
        <label>SessionId：</label>
        <span id="sessionId"></span><br/>
    </div>
    <div>
        <button onclick="loginOut()" value="logout">注销</button>
    </div>

    <hr/>
    <div>
        <input id="qrCode" type="text" placeholder="二维码"/>
        <button type="button" onclick="loginByQR()">确认登录</button>
    </div>

</body>
<script src="asert/js/jquery-2.1.1.min.js" type="text/javascript"></script>
<script src="asert/js/ajax.js"></script>
<script>
    $(function () {
        getLoginUser();
    })

    function getLoginUser() {
        debugger;
        SysApi.commenSubmitNoParm("getLoginUser",function (data) {
            $('#loginUser').html(data.data.userName);
            $('#sessionId').html(data.data.descrbe);
        })
    }
    
    function loginByQR() {
        var val = $("#qrCode").val();
        if(val){
            SysApi.getSubmitNoParm("loginByQR/"+val,function (data) {
                if(data.code == 200){
                    var login = data.data;
                    if(login.code == 2){
                        console.log("确认登录成功:"+login.value);
                    }else {
                        console.log("确认登录失败！");
                    }
                }
            });
        }else {
            alert("二维码信息不能为空")
        }
    }
    
    function loginOut() {
        location.href = "logout";
    }
</script>
</html>